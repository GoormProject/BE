# JellyDiary
![334061535-f142244d-c200-4318-94a9-93258809f9ae](https://github.com/JellyDiary/JellyDiary_BE/assets/94800969/779f6699-bb18-4e62-8e73-ec8b8f9b8dab)


반려 동물의 일상 기록 부터 공동 육아 까지 한번에 가능한 다이어리 웹 서비스입니다.

## 프로젝트 배경
반려동물 522만 시대, 반려동물 특화 소셜 네트워크로써

단순히 정보를 공유하는 것을 넘어 사용자 간의 교류를 가능하게 하여 반려동물의 일상 관리에 있어 공동의 노력과 지식을 통합할 수 있는 공간을 제공하고자 하였습니다.

<br>

## 노션

>프로젝트 노션 :
[프로젝트 노션 바로가기](https://sinyoung-siny.notion.site/f8dc9aa278f74c989193af6fcb755a8e?pvs=4)

<br>

## 팀원

| 이름   | 포지션 | 팀원구분        |             Github              |
| ------ | :----: | :---------------: | ----------------------------- |
| 김주희 |   BE   | 팀원 |    https://github.com/Jjuhui313     |
| 이신영 |   BE   | 팀장 | https://github.com/Lee-Siny |
| 정다운 |   BE   | 팀원 | https://github.com/daewangbali |

<br>

## 기술스택
## BE
<div> 
  <img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white">
  <img src="https://img.shields.io/badge/IntelliJIDEA-000000?style=for-the-badge&logo=IntelliJIDEA&logoColor=white">
  <img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white">
  <img src="https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=Linux&logoColor=white">
  <img src="https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=Ubuntu&logoColor=white">
  <img src="https://img.shields.io/badge/jsonwebtokens-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white">
  <img src="https://img.shields.io/badge/springsecurity-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
  <img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white">
  <img src="https://img.shields.io/badge/JPA-6DB33F?style=for-the-badge&logo=JPA&logoColor=white">
  <img src="https://img.shields.io/badge/queryDsl-0769AD?style=for-the-badge&logo=queryDsl&logoColor=white">
  <img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white">
  <img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white">
  <img src="https://img.shields.io/badge/amazonelasticache-C925D1?style=for-the-badge&logo=amazonelasticache&logoColor=white">
  <img src="https://img.shields.io/badge/AmazonEC2-FF9900?style=for-the-badge&logo=AmazonEC2&logoColor=white"/> 
  <img src="https://img.shields.io/badge/AmazonS3-569A31?style=for-the-badge&logo=AmazonS3&logoColor=white"/>
  <img src="https://img.shields.io/badge/AmazonRDS-527FFF?style=for-the-badge&logo=AmazonRDS&logoColor=white"/>
  <img src="https://img.shields.io/badge/amazonroute53-8C4FFF?style=for-the-badge&logo=amazonroute53&logoColor=white">
  <img src="https://img.shields.io/badge/cloudfront-009DC7?style=for-the-badge&logo=cloudfront&logoColor=white">
  <img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">
  <img src="https://img.shields.io/badge/SSE-654FF0?style=for-the-badge&logo=SSE&logoColor=white">
  <img src="https://img.shields.io/badge/webSocket-90E59A?style=for-the-badge&logo=webSocket&logoColor=white">
  <img src="https://img.shields.io/badge/STOMP-EB508D?style=for-the-badge&logo=STOMP&logoColor=white">
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
  <img src="https://img.shields.io/badge/GithubActions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white"/>
  <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white"/>
  <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=swagger&logoColor=black"/>
  <!-- 웹소켓, 스톰프,  -->
</div>

### 협업툴
<div>
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"/>
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"/>
  <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white"/> 
  <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"/>
  <!-- 깃, 깃허브, 지라, 피그마, 디스코드 -->
</div>

<br>

## 프로젝트 기능

### 😎 소셜로그인(네이버, 카카오, 구글)

> 사용자의 접근성을 높이기 위해 세 가지(네이버 / 카카오 / 구글) 소셜 로그인을 구현하였습니다. <br>
OAuth2와 SpringSecurity, JWT Token(Access Token & Refresh Token)을 이용하여 구현하였습니다.

### 🖋️ 회원 정보 수정

> 프로필 이미지와 닉네임, 프로필 설명을 수정할 수 있습니다.

### 🖋️ 알림 정보 수정
> 전체 알림을 키고 끌 수 있으며, 전체 알림을 켰을 때는 세부적인 알림(구독, 게시물 좋아요, 게시물, 다이어리, 댓글, 댓글 언급, 새로운 팔로워, 게시물 좋아요, DM)에 대한 알림 설정을 할 수 있습니다. <br>
구독 : 누군가가 나를 구독했을 때 알림을 받거나, 받지 않도록 설정할 수 있습니다. <br>
게시물 좋아요 : 누군가가 내가 쓴 게시물에 좋아요를 눌렀을 때 알림을 받거나, 받지 않도록 설정할 수 있습니다. <br>
게시물 : 내가 참여하고 있는 다이어리의 생성자(다이어리 주인)가 해당 다이어리에 게시물을 생성 / 삭제 했을 때 알림을 받거나, 받지 않도록 설정할 수 있습니다. <br>
다이어리 : 다이어리 생성자가 내가 참여한 다이어리를 삭제했을 경우 / 다이어리 생성자가 다이어리에 참여자를 초대한 경우 알림을 받거나, 받지 않도록 설정할 수 있습니다. <br>
댓글 : 내 게시물에 누군가가 댓글을 남기거나 내 댓글에 누군가가 답글을 남겼을 때 알림을 받거나 받지 않도록 설정할 수 있습니다. <br>
댓글 언급 : 댓글 및 답글에 누군가가 나를 언급했을 때 알림을 받거나 받지 않도록 설정할 수 있습니다. <br>
새로운 팔로워 : 누군가가 나를 팔로우 했을 때 알림을 받거나 받지 않도록 설정할 수 있습니다. <br>
게시물 좋아요 : 누군가가 내 게시물에 좋아요를 남겼을 때 알림을 받거나 받지 않도록 설정할 수 있습니다. <br>
DB(메시지) : 누군가가 나에게 DB(메시지)를 보냈을 때 알림을 받거나 받지 않도록 설정할 수 있습니다. <br>


### 💬 다이어리 CRUD

> 유저는 다이어리를 생성하고 다른 유저를 초대할 수 있습니다. <br>
초대를 수락한 유저는 다이어리 채팅방에 참여하며, public 및 private 게시물을 볼 수 있습니다. <br>
초대 수락 유저 중 쓰기 권한이 있는 유저는 일지를 작성할 수 있습니다. <br>
내가 만든 다이어리의 경우, 다이어리 정보 수정 페이지를 통해 다이어리 프로필을 수정하고, 유저 설정을 변경하며, 다이어리를 삭제할 수 있습니다. <br>
유저 설정에서는 초대할 유저를 검색하여 초대하거나 권한을 변경하고, 참여자를 삭제할 수 있습니다. <br>
또한, 다이어리 리스트에서 내가 구독하거나 참여 중인 다이어리를 확인할 수 있습니다. <br>

### 💬 게시물 좋아요 CRUD
> 마음에 드는 게시물에 좋아요를 누를 수 있으며, 다시 누르면 좋아요를 취소할 수도 있습니다.
게시물을 상세 조회할 시 해당 게시물에 누적된 좋아요 수를 조회할 수 있습니다.

### 💬 댓글 CRUD
> 유저가 작성한 각 게시물에는 댓글과 해당 댓글에 대한 답글을 작성 / 삭제 할 수 있습니다. <br>
그리고 댓글과 답글에는 해당 게시물이 속한 다이어리의 참여자를 언급할 수 있습니다. <br>

### 🔍 유저 피드

> 해당 유저가 작성한 모든 게시물을 확인할 수 있습니다. <br>
이 때, 해당 유저와 내가 같은 다이어리에 소속되어 있으며, 내가 해당 다이어리 내에서 부여받은 권한이 "읽기" / "쓰기" 권한일 시 비공개 게시물을 확인할 수 있고,
만약, 내가 해당 다이어리에 소속되지 않았거나, 다이어리에 "구독자" 권한으로 소속되어 있다면 비공개 게시물은 확인할 수 없습니다. <br>
그리고 유저 피드에서는 유저의 팔로우 및 팔로워 리스트도 조회할 수 있습니다. <br>
팔로우,팔로워 리스트에서는 다른 유저를 팔로우하거나 언팔로우할 수 있으며, 특정 유저를 클릭하면 해당 유저의 피드로 이동할 수 있습니다. <br>

### 💬 팔로우 / 팔로잉 CRUD
> 다른 유저를 팔로우하거나 언팔로우할 수 있습니다. <br>
내 피드에서는 팔로우 및 팔로워 리스트를 조회할 수 있습니다.

### 🔍 유저 검색

> 댓글에서 사용자를 언급할 때 / 다이어리 설정에서 사용자를 초대할 때 다른 사용자를 검색할 수 있습니다.


### 🚪 채팅방

> 특정 유저에게 1:1 메시지를 보낼 수 있으며, 다이어리를 생성하면 그룹 채팅방도 함께 생성됩니다. 


### 📚 게시물 CRUD

> 다이어리 생성자라면 해당 다이어리에 게시물을 작성하거나 삭제할 수 있습니다. <br>
다이어리를 작성할 때 이미지를 5개까지 첨부할 수 있습니다. <br>
다이어리 권한에 따라 유저 피드 / SNS / 캘린더에서 해당 다이어리에 작성된 비공개 게시물을 조회할 수 있습니다. <br>
(다이어리에 소속되어 "읽기" / "쓰기" / "생성자" 권한이 있는 사용자는 비공개 게시물도 조회할 수 있으며, <br>
다이어리에 소속되지 않았거나, 다이어리에 소속되어도 "구독자" 권한인 사용자는 비공개 게시물을 조회할 수 없고, 공개 게시물만 조회할 수 있습니다.) <br>



### 🔍 SSE

> 사용자가 설정한 알림 설정에 따라 해당하는 알림을 실시간으로 받아볼 수 있습니다. <br>
알림 리스트를 확인할 수 있으며, 알림 리스트에서 알림을 전체 삭제할 수도 있습니다.


### 📂 SNS 무한스크롤

> SNS에서는 무한스크롤로 사용자들의 게시물을 최신순에 따라 조회할 수 있습니다.
Page보다는 무한스크롤에 적합한 Slice를 사용하였으며, QueryDsl을 사용하여 구현하였습니다.

<br>

## 적용 기술

### ◻ Swagger

> API 문서를 효율적으로 관리하여 프론트에서도 쉽게 API를 확인할 수 있도록 Swagger를 적용하였습니다.  
> 

### ◻ CI/CD

> 코드 수정 시, 빌드/배포의 반복과 빠른 반영이 어려워 배포자동화를 결정하였습니다.  
Pull Request가 생성될 때, 코드가 정상적으로 컴파일되고, 필요한 모든 의존성이 제대로 설정되었음을 확인합니다.  
main 브랜치에 푸시될 때, 빌드된 JAR 파일을 기반으로 Docker 이미지를 생성한 후, 빌드된 Docker 이미지를 DockerHub에 푸시하여, EC2 인스턴스에 미리 작성된 Docker Compose를 사용해 최신 이미지를 풀 받아 배포합니다.  


### ◻ JWT + SpringSecurity

> 인증 인가를 위해서 Access Token과 Refresh Token을 적용하였습니다.  
Spring Security 적용해 XSS, CSRF 공격 등과 같은 웹 보안 취약점을 방지하였습니다.


### ◻ WebSocket + Stomp

> 메시지의 형식이 정의되어있는 Stomp를 사용하여 개발의 편의성을 높이기 위해 WebSocket + Stomp를 적용하였습니다.  

### ◻ QueryDsl
> SNS에서 무한 스크롤을 구현할 시 복잡한 쿼리문을 자바 코드로 쉽게 구현하기 위해서 QueryDsl을 적용하였습니다.

<br>

## 🌐 Architecture

<div>
    <img src= "https://github.com/JellyDiary/JellyDiary_BE/assets/94800969/e5b7b2c1-fb5f-4a76-ad64-fd572e7b11a8">
</div>

<br>

## 📋 ERD Diagram

<div>
  <img src= "https://github.com/JellyDiary/JellyDiary_BE/assets/94800969/373e6e8c-12ae-4347-aec6-4902f1e074b7">

</div>

